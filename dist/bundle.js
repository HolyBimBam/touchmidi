(()=>{"use strict";var e,t,n,o={d:(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},r={};function i(e,t,n){return Math.min(Math.max(e,t),n)}function a(e,t="",n="",o="",r="",i=""){let a=e.replaceAll("\\n","<br>");return a=a.replaceAll("%v",t),a=a.replaceAll("%c",o),a=a.replaceAll("%t",r),a=a.replaceAll("%n",i),a=a.replaceAll("%p",n),a=a.replaceAll("%%","%"),a}function s(e=""){return e.startsWith("#")?`${e}60`:`${function(e){var t={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};return void 0!==t[e.toLowerCase()]&&t[e.toLowerCase()]}(e)}60`}function c(e,o=1,r=127){if(console.log("NODE OFF ! "+e),!t)return;const i=n>0?n:o;midOut.send([i-1+128,e,r])}function d(e,o=1,r=0){if(!t)return;const a=n>0?n:o;r=i(r,0,127),t.send([a-1+176,e,r])}function l(e,n=1,o=0,r=!1){if(!t)return;const{lsb:i,msb:a}=parseNRPN(e);if(t.send([n-1+176,99,a]),t.send([n-1+176,98,i]),r){const e=Math.floor(o/128),r=Math.floor(o%128);t.send([n-1+176,6,e]),t.send([n-1+176,38,r])}else t.send([n-1+176,6,o])}o.r(r),o.d(r,{resolve:()=>ct,set:()=>at});const f=new Map;function u(e){let t=f.get(e);return void 0===t&&(t=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),f.set(e,t)),t}function p(e,t){const n=window.ShadyCSS;return n&&!n.nativeShadow?e(n):t}function h(e){return`<${String(e.tagName).toLowerCase()}>`}const b="ActiveXObject"in window,m=Promise.resolve(),g=new WeakMap,y=e=>e,v=e=>{if("object"!=typeof e)throw TypeError("Assigned value must be an object: "+typeof e);return e&&Object.freeze(e)};function w(e,t){const n=typeof e;let o=y;switch(n){case"string":o=String;break;case"number":o=Number;break;case"boolean":o=Boolean;break;case"function":o=e,e=o();break;case"object":e&&Object.freeze(e),o=v}return{get:(t,n=e)=>n,set:(e,t,n)=>o(t,n),connect:"object"!==n&&"undefined"!==n?(n,r,i)=>{if(n[r]===e){const e=u(r);if(n.hasAttribute(e)){const t=n.getAttribute(e);n[r]=""===t&&o===Boolean||t}}return t&&t(n,r,i)}:t}}const E=new WeakMap,x=new Set;function k(){try{x.forEach((e=>{try{E.get(e)(),x.delete(e)}catch(t){throw x.delete(e),t}}))}catch(e){throw x.size&&k(),e}}function N(e){x.size||requestAnimationFrame(k),x.add(e)}const O=new WeakMap;function j(e,t){let n=O.get(e);n||(n=new Map,O.set(e,n));let o=n.get(t);return o||(o={target:e,key:t,value:void 0,contexts:void 0,deps:void 0,state:0,checksum:0,observed:!1},n.set(t,o)),o}function $(e){let t=e.state;return e.deps&&e.deps.forEach((e=>{t+=e.state})),t}function T(e){e.observed&&N(e),e.contexts&&e.contexts.forEach(T)}function M(e,t){t&&t.forEach((t=>{e.deps.add(t),e.observed&&(t.contexts||(t.contexts=new Set),t.contexts.add(e)),M(e,t.deps)}))}const S=new Set;function _(e,t,n,o){const r=j(e,t);if(S.size&&S.has(r))throw Error(`Circular get invocation is forbidden: '${t}'`);if(S.forEach((e=>{e.deps||(e.deps=new Set),e.deps.add(r),e.observed&&(r.contexts||(r.contexts=new Set),r.contexts.add(e))})),(o&&o(r.value)||!o)&&r.checksum&&r.checksum===$(r))return r.value;try{S.add(r),r.observed&&r.deps&&r.deps.size&&r.deps.forEach((e=>{e.contexts&&e.contexts.delete(r)})),r.deps=void 0;const t=n(e,r.value);r.deps&&r.deps.forEach((e=>{M(r,e.deps)})),t!==r.value&&(r.state+=1,r.value=t,T(r)),r.checksum=$(r),S.delete(r)}catch(e){throw r.checksum=0,S.delete(r),S.forEach((e=>{e.deps.delete(r),e.observed&&r.contexts.delete(e)})),e}return r.value}function P(e,t,n,o){const r=j(e,t),i=n(e,o,r.value);i!==r.value&&(r.checksum=0,r.state+=1,r.value=i,T(r))}const A=new Set;function C(e,t,n){e.checksum=0,e.state+=1,T(e),n&&function(e){A.size||requestAnimationFrame((()=>{A.forEach((e=>{(!e.contexts||e.contexts&&0===e.contexts.size)&&O.get(e.target).delete(e.key)})),A.clear()})),A.add(e)}(e),t&&(e.value=void 0)}function D(e,t,n,o){if(S.size)throw Error(`Invalidating property in chain of get calls is forbidden: '${t}'`);C(j(e,t),n,o)}function z(e,t,n,o){const r=j(e,t);let i;r.observed=!0;const a=function(e,t){return E.set(e,t),N(e),function(){x.delete(e),E.delete(e)}}(r,(()=>{const r=_(e,t,n);r!==i&&(o(e,r,i),i=r)}));return r.deps&&r.deps.forEach((e=>{e.contexts||(e.contexts=new Set),e.contexts.add(r)})),function(){a(),r.observed=!1,r.deps&&r.deps.size&&r.deps.forEach((e=>{e.contexts&&e.contexts.delete(r)}))}}try{L.env.NODE_ENV}catch(e){var L={env:{NODE_ENV:"production"}}}const I=(e,t)=>t,W=new WeakMap,q=new WeakMap;function R(e,t){e.hybrids=t;const n=[],o=Object.keys(t);W.set(e,n),q.set(e,o),o.forEach((o=>{const r=t[o],i=typeof r;let a;a="function"===i?"render"===o?function(e,t={}){if("function"!=typeof e)throw TypeError("The first argument must be a function: "+typeof e);const n={shadowRoot:!0,...t},o={mode:"open"};return"object"==typeof n.shadowRoot&&Object.assign(o,n.shadowRoot),{get(t){const r=e(t);let i=t;return n.shadowRoot&&(t.shadowRoot||t.attachShadow(o),i=t.shadowRoot),function(){return r(t,i),i}},observe(e,t){t()}}}(r):{get:r}:"object"!==i||null===r||Array.isArray(r)?w(r):{get:r.get||I,set:r.set||!r.get&&I||void 0,connect:r.connect,observe:r.observe},Object.defineProperty(e.prototype,o,{get:function(){return _(this,o,a.get)},set:a.set&&function(e){P(this,o,a.set,e)},enumerable:!0,configurable:"production"!==L.env.NODE_ENV}),a.observe&&n.unshift((e=>z(e,o,a.get,a.observe))),a.connect&&n.push((e=>a.connect(e,o,(()=>{D(e,o)}))))}))}let B;if("production"!==L.env.NODE_ENV){const e=(t,n)=>{n(t),Array.from(t.children).forEach((t=>e(t,n))),t.shadowRoot&&Array.from(t.shadowRoot.children).forEach((t=>e(t,n)))},t=new Map;B=(n,o)=>{t.size||m.then((()=>{e(document.body,(e=>{if(t.has(e.constructor)){const n=t.get(e.constructor);e.disconnectedCallback(),Object.keys(e.constructor.hybrids).forEach((t=>{D(e,t,e.constructor.hybrids[t]!==n[t])})),e.connectedCallback()}})),t.clear()})),t.set(n,o)}}const V=new WeakMap;function F(e,t){const n=typeof t;if("object"!==n&&"function"!==n)throw TypeError(`Second argument must be an object or a function: ${n}`);if(null!==e){const o=window.customElements.get(e);if("function"===n)return o!==t?window.customElements.define(e,t):o;if(o){if(o.hybrids===t)return o;if("production"!==L.env.NODE_ENV&&o.hybrids){Object.keys(o.hybrids).forEach((e=>{delete o.prototype[e]}));const e=o.hybrids;return R(o,t),B(o,e),o}throw Error(`Element '${e}' already defined`)}}class o extends HTMLElement{constructor(){super();const e=q.get(o);for(let t=0;t<e.length;t+=1){const n=e[t];if(Object.prototype.hasOwnProperty.call(this,n)){const e=this[n];delete this[n],this[n]=e}}}connectedCallback(){const e=W.get(o),t=[];for(let n=0;n<e.length;n+=1){const o=e[n](this);o&&t.push(o)}V.set(this,t)}disconnectedCallback(){const e=V.get(this);for(let t=0;t<e.length;t+=1)e[t]()}}return R(o,t),null!==e&&(Object.defineProperty(o,"name",{get:()=>e}),customElements.define(e,o)),o}function H(...e){return"object"==typeof e[0]&&null!==e[0]?(t=e[0],Object.keys(t).reduce(((e,n)=>{const o=u(n.replace(/((?!([A-Z]{2}|^))[A-Z])/g,"-$1"));return e[n]=F(o,t[n]),e}),{})):F(...e);var t}try{X.env.NODE_ENV}catch(e){var X={env:{NODE_ENV:"production"}}}const Y=`__store__connect__${Date.now()}__`,U=new WeakMap;function Z(e,t,n){return n&&U.set(n,null),U.set(t,e),t}function G(e,t,n){return Z(e,t,n),(e.external&&t||!n||je(t))&&e.invalidate(),t}function J(e,t,n,o){return P(e,t,o?G:Z,n),n}let K;function Q(){return K||(K=Date.now(),requestAnimationFrame((()=>{K=void 0}))),K}const ee=new WeakMap;function te(e){let t=ee.get(e);return t||(t=Q(),ee.set(e,t)),t}function ne(e){return ee.set(e,Q()),e}function oe(e){"function"==typeof e&&(e={get:e});const t={cache:!0,...e};if(!1===t.cache||0===t.cache)t.validate=e=>!e||te(e)===Q();else if("number"==typeof t.cache)t.validate=e=>!e||te(e)+t.cache>Q();else if(!0!==t.cache)throw TypeError("Storage cache property must be a boolean or number: "+typeof t.cache);return Object.freeze(t)}function re(e,t){return Array.isArray(e)?function(e,t){let n=ye.get(e);if(n&&!n.enumerable&&!t&&n.nested)throw TypeError(ue(e,"Nested model definition cannot be used outside of the parent definition"));if(!n){const o=me(e),r=new Set;if(r.add(o),!t){if(!o.enumerable)throw TypeError(ue(e,"Provided model definition does not support listing (it must be enumerable - set `id` property to `true`)"));if(!o.storage.list)throw TypeError(ue(e,"Provided model definition storage does not support `list` action"))}n={list:!0,nested:!o.enumerable&&t,model:e,contexts:r,enumerable:o.enumerable,storage:oe({cache:o.storage.cache,get:!t&&(e=>o.storage.list(e))}),placeholder:()=>Object.freeze(Object.create(ge)),isInstance:e=>Object.getPrototypeOf(e)!==ge,create(t){const r=t.reduce(((t,n)=>{let r=n;if("object"==typeof n&&null!==n){r=n.id;const i=U.get(n);let a=n;if(i){if(i.model!==e)throw TypeError("Model instance must match the definition")}else a=o.create(n),o.enumerable&&(r=a.id,J(o,r,a));o.enumerable||t.push(a)}else if(!o.enumerable)throw TypeError("Model instance must be an object: "+typeof n);if(o.enumerable){const n=t.length;Object.defineProperty(t,n,{get(){return _(this,n,Oe(this)?pe:()=>Ee(e,r))},enumerable:!0})}return t}),[]);return U.set(r,n),g.set(r,Se),Object.freeze(r)}},ye.set(e,Object.freeze(n))}return n}(e[0],t):me(e,t)}function ie(e,t){switch(e){case"string":return e=>null!=e?String(e):"";case"number":return Number;case"boolean":return Boolean;default:throw TypeError(`The value of the '${t}' must be a string, number or boolean: ${e}`)}}const ae=(e,t)=>t;function se(e,t,n=e){return P(e,"state",ae,{state:t,value:n}),e}const ce=(e,t={state:"ready",value:e})=>t;function de(e){return _(e,"state",ce)}function le(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,le)}const fe=new WeakMap;function ue(e,t){return`${t}:\n\n${JSON.stringify(e,((e,t)=>{if(e!==Y)return t}),2)}\n\n`}const pe=(e,t)=>t,he=Promise.resolve(),be=new WeakMap;function me(e,t){if("object"!=typeof e||null===e)throw TypeError("Model definition must be an object: "+typeof e);let n=be.get(e);if(n&&!n.enumerable){if(t&&!n.nested)throw TypeError(ue(e,"Provided model definition for nested object already used as a root definition"));if(!t&&n.nested)throw TypeError(ue(e,"Nested model definition cannot be used outside of the parent definition"))}if(!n){const o=e[Y];let r;"object"==typeof o&&Object.freeze(o);const i={},a=hasOwnProperty.call(e,"id"),s=new Map;n={model:e,external:!!o,enumerable:a,nested:!a&&t,placeholder:e=>Object.freeze(Object.assign(Object.create(i),{id:e})),isInstance:e=>Object.getPrototypeOf(e)!==i,invalidate:()=>{r||(r=he.then((()=>{D(n,n,!0),r=null})))},checks:s},n.storage=oe(o||function(e){return{get:e.enumerable?()=>{}:()=>e.create({}),set:e.enumerable?(e,t)=>t:(e,t)=>null===t?{id:e}:t,list:e.enumerable&&function(t){if(t)throw TypeError("Memory-based model definition does not support id");return function(e){const t=[],n=O.get(e);return n&&n.forEach((e=>{t.push(e)})),t}(e).reduce(((t,{key:n,value:o})=>(n===e||o&&!je(o)&&t.push(n),t)),[])}}}(n));const c=Object.keys(Object.freeze(e)).filter((e=>e!==Y)).map((t=>{if("id"!==t&&Object.defineProperty(i,t,{get(){throw Error(`Model instance in ${de(this).state} state - use store.pending(), store.error(), or store.ready() guards`)},enumerable:!0}),"id"===t){if(!0!==e[t])throw TypeError("The 'id' property in model definition must be set to 'true' or not be defined");return(e,t,n)=>{let o;o=n?n.id:hasOwnProperty.call(t,"id")?String(t.id):le(),Object.defineProperty(e,"id",{value:o,enumerable:!0})}}const{defaultValue:o,type:r}=function(e,t,n){let o=n.model[t],r=typeof n.model[t];if(o instanceof String||o instanceof Number){const i=fe.get(o);if(!i)throw TypeError(ue(e,`You must use primitive ${typeof o.valueOf()} value for '${t}' property of the provided model definition`));o=o.valueOf(),r=typeof o,n.checks.set(t,i)}return{defaultValue:o,type:r}}(e,t,n);switch(r){case"function":return e=>{Object.defineProperty(e,t,{get(){return _(this,t,o)}})};case"object":{if(null===o)throw TypeError(`The value for the '${t}' must be an object instance: ${o}`);if(Array.isArray(o)){const e=typeof o[0];if("object"!==e){const n=ie(e,t),r=Object.freeze(o.map(n));return(e,o,i)=>{if(hasOwnProperty.call(o,t)){if(!Array.isArray(o[t]))throw TypeError(`The value for '${t}' property must be an array: ${typeof o[t]}`);e[t]=Object.freeze(o[t].map(n))}else i&&hasOwnProperty.call(i,t)?e[t]=i[t]:e[t]=r}}const r=re(o,!0);if(r.enumerable&&o[1]){const e=o[1];if("object"!=typeof e)throw TypeError(`Options for '${t}' array property must be an object instance: ${typeof e}`);e.loose&&(n.contexts=n.contexts||new Set,n.contexts.add(re(o[0])))}return(e,n,i)=>{if(hasOwnProperty.call(n,t)){if(!Array.isArray(n[t]))throw TypeError(`The value for '${t}' property must be an array: ${typeof n[t]}`);e[t]=r.create(n[t])}else e[t]=i&&i[t]||!r.enumerable&&r.create(o)||[]}}const e=re(o,!0);return e.enumerable||e.external?(n,r,i)=>{let a;if(hasOwnProperty.call(r,t)){const n=r[t];if("object"!=typeof n||null===n)null!=n&&(a={id:n});else{const t=U.get(n);if(t){if(t.model!==o)throw TypeError("Model instance must match the definition");a=n}else a=e.create(n),J(e,a.id,a)}}else a=i&&i[t];if(a){const e=a.id;Object.defineProperty(n,t,{get(){return _(this,t,Oe(this)?pe:()=>Ee(o,e))},enumerable:!0})}else n[t]=void 0}:(n,o,r)=>{hasOwnProperty.call(o,t)?n[t]=e.create(o[t],r&&r[t]):n[t]=r?r[t]:e.create({})}}default:{const e=ie(r,t);return(n,r,i)=>{hasOwnProperty.call(r,t)?n[t]=e(r[t]):i&&hasOwnProperty.call(i,t)?n[t]=i[t]:n[t]=o}}}}));n.create=function(e,t){if(null===e)return null;if("object"!=typeof e)throw TypeError(`Model values must be an object instance: ${e}`);const o=c.reduce(((n,o)=>(o(n,e,t),n)),{});return U.set(o,n),g.set(o,Se),Object.freeze(o)},Object.freeze(i),be.set(e,Object.freeze(n))}return n}const ge=Object.getOwnPropertyNames(Array.prototype).reduce(((e,t)=>("length"===t||"constructor"===t||Object.defineProperty(e,t,{get(){throw Error(`Model list instance in ${de(this).state} state - use store.pending(), store.error(), or store.ready() guards`)}}),e)),[]),ye=new WeakMap;function ve(e,t){return t||Q()}function we(e,t,n){return"production"!==X.env.NODE_ENV&&!1!==n&&console.error(t),se(e,"error",t)}function Ee(e,t){const n=re(e);let o;if(!n.storage.get)throw TypeError(ue(e,"Provided model definition does not support 'get' method"));if(n.enumerable){if(o=function(e){switch(typeof e){case"object":return JSON.stringify(Object.keys(e).sort().reduce(((t,n)=>{if("object"==typeof e[n]&&null!==e[n])throw TypeError(`You must use primitive value for '${n}' key: ${typeof e[n]}`);return t[n]=e[n],t}),{}));case"undefined":return;default:return String(e)}}(t),!n.list&&!o)throw TypeError(ue(e,`Provided model definition requires non-empty id: "${o}"`))}else if(void 0!==t)throw TypeError(ue(e,"Provided model definition does not support id"));return _(n,o,((e,r)=>{if(r&&Oe(r))return r;let i=!0;if(n.contexts&&n.contexts.forEach((e=>{_(e,e,ve)===Q()&&(i=!1)})),i&&r&&(!0===n.storage.cache||n.storage.validate(r)))return r;try{let e=n.storage.get(t);if("object"!=typeof e||null===e)throw Error(`Model instance ${void 0!==o?`with '${o}' id`:""} does not exist`);return e instanceof Promise?(e=e.then((e=>{if("object"!=typeof e||null===e)throw Error(`Model instance ${void 0!==o?`with '${o}' id`:""} does not exist`);return J(n,o,n.create(o?{...e,id:o}:e))})).catch((e=>J(n,o,we(r||n.placeholder(o),e)))),se(r||n.placeholder(o),"pending",e)):(r&&U.set(r,null),ne(n.create(!n.list&&o?{...e,id:o}:e)))}catch(e){return ne(we(r||n.placeholder(o),e))}}),n.storage.validate)}const xe=new WeakMap;function ke(e){const t=Object.keys(e),n=Error(`Model validation failed (${t.join(", ")}) - read the details from 'errors' property`);return n.errors=e,n}function Ne(e,t=!0){if("object"!=typeof e||null===e)throw TypeError(`The first argument must be a model instance or a model definition: ${e}`);const n=U.get(e);if(null===n)throw Error("Provided model instance has expired. Haven't you used stale value from the outer scope?");if(n)D(n,e.id,t,!0);else{if(!be.get(e)&&!ye.get(e[0]))throw Error("Model definition must be used before - passed argument is probably not a model definition");!function(e,t,n){if(S.size)throw Error("Invalidating all properties in chain of get calls is forbidden");const o=O.get(e);o&&o.forEach((e=>{C(e,t,true)}))}(re(e),t)}}function Oe(e){if(null===e||"object"!=typeof e)return!1;const{state:t,value:n}=de(e);return"pending"===t&&n}function je(e,t){if(null===e||"object"!=typeof e)return!1;const{state:n,value:o}=de(e),r="error"===n&&o;return r&&void 0!==t?r.errors&&r.errors[t]:r}function $e(e){if(null===e||"object"!=typeof e)return!1;const t=U.get(e);return!(!t||!t.isInstance(e))}function Te(e){const t={...e};return delete t.id,t}function Me(e,t){return!!e||`${t} is required`}function Se(e,t={}){const n=re(e);if("object"!=typeof t&&(t={id:t}),void 0!==t.id&&"function"!=typeof t.id){const e=t.id;t.id=t=>t[e]}if(t.draft){if(n.list)throw TypeError("Draft mode is not supported for listing model definition");e={...e,[Se.connect]:{get(e){const t=Se.get(n.model,e);return $e(t)?t:Oe(t)},set:(e,t)=>null===t?{id:e}:t}},t.draft=re(e),xe.set(t.draft,{model:n.model,id:t.id})}const o=t.draft&&n.enumerable&&!t.id,r={get:(n,r)=>{if(o&&!r){const n=t.draft.create({});return J(t.draft,n.id,n),Se.get(e,n.id)}const i=t.draft&&r?r.id:t.id&&t.id(n),a=Se.get(e,i);return r&&a!==r&&!$e(a)?function(e,t){const n=Object.freeze(Object.keys(e).reduce(((t,n)=>(Object.defineProperty(t,n,{get:()=>e[n],enumerable:!0}),t)),Object.create(e)));U.set(n,U.get(e));const{state:o,value:r}=de(t);return se(n,o,r)}(r,a):a},set:n.list?void 0:(e,t,n)=>(n&&$e(n)||(n=r.get(e)),Se.set(n,t).catch((()=>{})),n),connect:t.draft?()=>()=>Ne(e,!1):void 0};return r}Object.assign(Se,{connect:Y,get:Ee,set:function(e,t={}){let n=U.get(e);const o=!!n;if(null===n)throw Error("Provided model instance has expired. Haven't you used stale value?");if(n||(n=re(e)),n.nested)throw ue(n.model,TypeError("Setting provided nested model instance is not supported, use the root model instance"));if(n.list)throw TypeError("Listing model definition does not support 'set' method");if(!n.storage.set)throw ue(n.model,TypeError("Provided model definition storage does not support 'set' method"));if(o&&Oe(e))throw Error("Provided model instance is in pending state");let r;const i=(t,i)=>{if(o)se(e,t,i);else{const e=j(n,r);e.value&&se(e.value,t,i)}};try{if(n.enumerable&&!o&&(!t||"object"!=typeof t))throw TypeError(`Values must be an object instance: ${t}`);if(t&&hasOwnProperty.call(t,"id"))throw TypeError(`Values must not contain 'id' property: ${t.id}`);const a=n.create(t,o?e:void 0),s=t?Object.keys(t):[],c=xe.get(n),d={},l=o&&c&&je(e);let f=!1;if(a&&(n.checks.forEach(((e,t)=>{if(-1===s.indexOf(t)&&(l&&l.errors&&l.errors[t]&&(f=!0,d[t]=l.errors[t]),c&&a[t]==n.model[t]))return;let o;try{o=e(a[t],t,a)}catch(e){o=e}!0!==o&&void 0!==o&&(f=!0,d[t]=o||!0)})),f&&!c))throw ke(d);r=a?a.id:e.id;const u=Promise.resolve(n.storage.set(o?r:void 0,a,s)).then((e=>{const t=e===a?a:n.create(e);if(o&&t&&r!==t.id)throw TypeError(`Local and storage data must have the same id: '${r}', '${t.id}'`);const i=t?t.id:r;return f&&c&&se(t,"error",ke(d)),J(n,i,t||we(n.placeholder(i),Error(`Model instance ${void 0!==r?`with '${r}' id`:""} does not exist`),!1),!0)})).catch((e=>{throw e=void 0!==e?e:Error("Undefined error"),i("error",e),e}));return i("pending",u),u}catch(e){return i("error",e),Promise.reject(e)}},clear:Ne,pending:Oe,error:je,ready:$e,submit:function(e){const t=U.get(e);if(!t||!xe.has(t))throw TypeError(`Provided model instance is not a draft: ${e}`);if(Oe(e))throw Error("Model draft in pending state");const n=xe.get(t);let o;if(n.id){const t=Se.get(n.model,e.id);o=Promise.resolve(Oe(t)||t).then((t=>Se.set(t,Te(e))))}else o=Se.set(n.model,Te(e));return o=o.then((t=>(se(e,"ready"),Se.set(e,Te(t)).then((()=>t))))).catch((t=>(se(e,"error",t),Promise.reject(t)))),se(e,"pending",o),o},value:function(e,t=Me,n=""){switch(typeof e){case"string":e=new String(e);break;case"number":e=new Number(e);break;default:throw TypeError("Default value must be a string or a number: "+typeof e)}let o;if(t instanceof RegExp)o=e=>t.test(e)||n;else{if("function"!=typeof t)throw TypeError("The second argument must be a RegExp instance or a function: "+typeof t);o=(...e)=>{const o=t(...e);return!0!==o&&void 0!==o?o||n:o}}return fe.set(e,o),e}});const _e=new WeakMap,Pe={get:(e,t)=>_e.get(e)||(t&&_e.set(e,t),t),set:(e,t)=>(_e.set(e,t),t)};function Ae(e){let t;for(;e&&(t=Pe.get(e))&&t.endNode;)e=t.endNode;return e}function Ce(e){if(e.nodeType!==Node.TEXT_NODE){let t=e.childNodes[0];for(;t;)e.removeChild(t),t=e.childNodes[0]}else{const t=Pe.get(e);if(t.startNode){const e=Ae(t.endNode);let n=t.startNode;const o=e.nextSibling;for(;n;){const e=n.nextSibling;n.parentNode.removeChild(n),n=e!==o&&e}}}}const De=new WeakMap;function ze(e,t){const n=Pe.get(e),o=n.startNode,r=Ae(n.endNode);t.parentNode.insertBefore(e,t.nextSibling);let i=e,a=o;for(;a;){const e=a.nextSibling;i.parentNode.insertBefore(a,i.nextSibling),i=a,a=e!==r.nextSibling&&e}}function Le(e,t,n){const o=Array.isArray(n)?"array":typeof n;let r=Pe.get(t,{});switch(r.type!==o&&(Ce(t),"array"===o&&De.delete(t),r=Pe.set(t,{type:o}),""!==t.textContent&&(t.textContent="")),o){case"function":n(e,t);break;case"array":!function(e,t,n,o){let r=De.get(t);const i=n.map(((e,t)=>({id:Object.prototype.hasOwnProperty.call(e,"id")?e.id:t,value:e,placeholder:null,available:!0})));if(De.set(t,i),r){const e=new Set;i.forEach((t=>e.add(t.id))),r=r.filter((t=>!!e.has(t.id)||(Ce(t.placeholder),t.placeholder.parentNode.removeChild(t.placeholder),!1)))}let a=t;const s=n.length-1,c=Pe.get(t);for(let t=0;t<i.length;t+=1){const n=i[t];let d;if(r)for(let e=0;e<r.length;e+=1)if(r[e].available&&r[e].id===n.id){d=r[e];break}d?(d.available=!1,n.placeholder=d.placeholder,n.placeholder.previousSibling!==a&&ze(n.placeholder,a),d.value!==n.value&&o(e,n.placeholder,n.value)):(n.placeholder=document.createTextNode(""),a.parentNode.insertBefore(n.placeholder,a.nextSibling),o(e,n.placeholder,n.value)),a=Ae(Pe.get(n.placeholder).endNode||n.placeholder),0===t&&(c.startNode=n.placeholder),t===s&&(c.endNode=a)}r&&r.forEach((e=>{e.available&&(Ce(e.placeholder),e.placeholder.parentNode.removeChild(e.placeholder))}))}(e,t,n,Le);break;default:t.textContent="number"===o||n?n:""}}const Ie=new WeakMap,We=new WeakMap;function qe(e,t,n){const o=We.get(t)||new Set,r=function(e,t=new Set){return Array.isArray(e)?e.forEach((e=>t.add(e))):null!==e&&"object"==typeof e?Object.keys(e).forEach((n=>e[n]&&t.add(n))):t.add(e),t}(n);We.set(t,r),r.forEach((e=>{t.classList.add(e),o.delete(e)})),o.forEach((e=>{t.classList.remove(e)}))}const Re=new WeakMap;function Be(e,t,n){if(null===n||"object"!=typeof n)throw TypeError(`Style value must be an object in ${h(t)}:`,n);const o=Re.get(t)||new Map,r=Object.keys(n).reduce(((e,r)=>{const i=u(r),a=n[r];return a||0===a?t.style.setProperty(i,a):t.style.removeProperty(i),e.set(i,a),o.delete(i),e}),new Map);o.forEach(((e,n)=>{t.style[n]=""})),Re.set(t,r)}function Ve(e,t,n){if("on"===t.substr(0,2))return o=t.substr(2),(e,t,n,r)=>{if(r){const e=Ie.get(t);e&&t.removeEventListener(o,e.get(r),void 0!==r.options&&r.options)}if(n){if("function"!=typeof n)throw Error("Event listener must be a function: "+typeof n);let r=Ie.get(t);r||(r=new WeakMap,Ie.set(t,r));const i=n.bind(null,e);r.set(n,i),t.addEventListener(o,i,void 0!==n.options&&n.options)}};var o;switch(e){case"class":return qe;case"style":return Be;default:return(o,r,i)=>{if(n||r instanceof SVGElement||!(t in r))if(!1===i||null==i)r.removeAttribute(e);else{const t=!0===i?"":String(i);r.setAttribute(e,t)}else r[t]!==i&&(r[t]=i)}}}try{Fe.env.NODE_ENV}catch(e){var Fe={env:{NODE_ENV:"production"}}}const He=Date.now(),Xe=(e=0)=>`{{h-${He}-${e}}}`,Ye=Xe("(\\d+)"),Ue=new RegExp(`^${Ye}$`),Ze=new RegExp(Ye,"g"),Ge=`--${He}--`,Je=new RegExp(Ge,"g"),Ke=new WeakMap,Qe="object"==typeof window.ShadyDOM&&window.ShadyDOM.inUse?function(e){let t;return{get currentNode(){return t},nextNode(){if(void 0===t)t=e.childNodes[0];else if(t.childNodes.length)t=t.childNodes[0];else if(t.nextSibling)t=t.nextSibling;else{let n=t.parentNode;for(t=n.nextSibling;!t&&n!==e;)n=n.parentNode,t=n.nextSibling}return!!t}}}:function(e){return document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT,null,!1)},et=document.createElement("div"),tt=new Map;function nt(e,t){const n=Xe(t);return`${function(e,t=0){let n=(e=e.replace(/(^[\n\s\t ]+)|([\n\s\t ]+$)+/g,"")).indexOf("\n");if(n>-1){let o=0-t-2;for(n+=1;" "===e[n]&&n<e.length;n+=1)o+=1;return e.replace(/\n +/g,(e=>e.substr(0,Math.max(e.length-o,1))))}return e}(e).split("\n").filter((e=>e)).map((e=>{const t=e.indexOf(n);return t>-1?`| ${e}\n--${"-".repeat(t)}${"^".repeat(6)}`:`| ${e}`})).join("\n").replace(Ze,"${...}")}`}function ot({target:e},t){let n;switch(e.type){case"radio":case"checkbox":n=e.checked&&e.value;break;case"file":n=e.files;break;default:n=e.value}t(n)}function rt(e,t){return e.split(".").reverse().reduce(((e,n)=>e?{[n]:e}:{[n]:t}),null)}const it=new Map;function at(e,t){if(!e)throw Error(`The first argument must be a property name or an object instance: ${e}`);if("object"==typeof e){if(void 0===t)throw Error("For model instance property the second argument must be defined");const n=g.get(e);if(!n)throw Error("Provided object must be a model instance of the store");return(o,r)=>{ot(r,(o=>{n.set(e,null!==t?rt(t,o):t)}))}}if(2===arguments.length)return n=>{n[e]=t};let n=it.get(e);return n||(n=(t,n)=>{ot(n,(n=>{t[e]=n}))},it.set(e,n)),n}const st=new WeakMap;function ct(e,t,n=200){return(o,r)=>{let i;t&&(i=setTimeout((()=>{i=void 0,requestAnimationFrame((()=>{t(o,r)}))}),n)),st.set(r,e),e.then((t=>{i&&clearTimeout(i),st.get(r)===e&&(t(o,r),st.set(r,null))}))}}const dt=Xe(),lt=Xe("svg"),ft=/@import/,ut=new Map,pt=new WeakMap,ht={define(e){return H(e),this},key(e){return this.id=e,this},style(...e){return pt.set(this,e.filter((e=>e))),this}};function bt(e,t,n){const o=(r,i=r)=>{const a=pt.get(o);let s,c=e.join(dt);if(a){const e=a.join(dt);s=!!i.adoptedStyleSheets&&!ft.test(e),s||(c+=e)}n&&(c+=lt);let d=ut.get(c);d||(d=function(e,t,n){const o=document.createElement("template"),r=[];let i=function(e,t){let n=e.reduce(((t,n,o)=>0===o?n:e.slice(o).join("").match(/^\s*<\/\s*(table|tr|thead|tbody|tfoot|colgroup)>/)?`${t}\x3c!--${Xe(o-1)}--\x3e${n}`:t+Xe(o-1)+n),"");return t&&(n+=`<style>\n${t.join("\n/*------*/\n")}\n</style>`),b?n.replace(/style\s*=\s*(["][^"]+["]|['][^']+[']|[^\s"'<>/]+)/g,(e=>`${Ge}${e}`)):n}(e,n);if(t&&(i=`<svg>${i}</svg>`),b?o.innerHTML=i:(et.innerHTML=`<template>${i}</template>`,o.content.appendChild(et.children[0].content)),t){const e=o.content.firstChild;o.content.removeChild(e),Array.from(e.childNodes).forEach((e=>o.content.appendChild(e)))}!function(e){const t=document.createNodeIterator(e,NodeFilter.SHOW_COMMENT,null,!1);let n;for(;n=t.nextNode();)Ue.test(n.textContent)&&(n.parentNode.insertBefore(document.createTextNode(n.textContent),n),n.parentNode.removeChild(n))}(o.content);const a=Qe(o.content);let s=0;for(;a.nextNode();){const n=a.currentNode;if(n.nodeType===Node.TEXT_NODE){const e=n.textContent;if(!e.match(Ue)){const t=e.match(Ze);if(t){let o=n;t.reduce(((e,t)=>{const[n,o]=e.pop().split(t);return n&&e.push(n),e.push(t),o&&e.push(o),e}),[e]).forEach(((e,t)=>{0===t?o.textContent=e:o=o.parentNode.insertBefore(document.createTextNode(e),o.nextSibling)}))}}const t=n.textContent.match(Ue);t&&(b||(n.textContent=""),r[t[1]]=[s,Le])}else n.nodeType===Node.ELEMENT_NODE&&Array.from(n.attributes).forEach((o=>{const i=o.value.trim(),a=b?o.name.replace(Ge,""):o.name,c=i.match(Ue);if(c){const i=e[c[1]].replace(/\s*=\s*['"]*$/g,"").split(/\s+/).pop();r[c[1]]=[s,Ve(a,i,t)],n.removeAttribute(o.name)}else{const e=i.match(Ze);if(e){const t=`attr__${a}`;e.forEach(((n,o)=>{const[,c]=n.match(Ue);r[c]=[s,(r,s,c)=>{const d=Pe.get(s,{});d[t]=(d[t]||i).replace(n,null==c?"":c),1!==e.length&&o+1!==e.length||(s.setAttribute(a,d[t]),d[t]=void 0)}]})),o.value="",b&&a!==o.name&&(n.removeAttribute(o.name),n.setAttribute(a,""))}}}));s+=1}return function(e,t,n,a){const s=Pe.get(t,{type:"function"});if(o!==s.template){(s.template||t.nodeType===Node.ELEMENT_NODE)&&Ce(t),s.prevArgs=null;const n=document.importNode(function(e,t){return t?p((n=>{let o=Ke.get(e);o||(o=new Map,Ke.set(e,o));let r=o.get(t);if(!r){r=document.createElement("template"),r.content.appendChild(e.content.cloneNode(!0)),o.set(t,r);const i=r.content.querySelectorAll("style");Array.from(i).forEach((e=>{const t=e.childNodes.length+1;for(let n=0;n<t;n+=1)e.parentNode.insertBefore(document.createTextNode(Xe()),e)})),n.prepareTemplate(r,t.toLowerCase())}return r}),e):e}(o,e.tagName).content,!0),i=Qe(n),a=r.slice(0);let c=0,d=a.shift();const l=[];for(s.template=o,s.markers=l;i.nextNode();){const t=i.currentNode;if(t.nodeType===Node.TEXT_NODE)Ue.test(t.textContent)?t.textContent="":b&&(t.textContent=t.textContent.replace(Je,""));else if("production"!==Fe.env.NODE_ENV&&t.nodeType===Node.ELEMENT_NODE&&t.tagName.indexOf("-")>-1&&!customElements.get(t.tagName.toLowerCase()))throw Error(`Missing ${h(t)} element definition in ${h(e)}`);for(;d&&d[0]===c;)l.push([t,d[1]]),d=a.shift();c+=1}if(t.nodeType===Node.TEXT_NODE){s.startNode=n.childNodes[0],s.endNode=n.childNodes[n.childNodes.length-1];let e=t,o=n.childNodes[0];for(;o;)t.parentNode.insertBefore(o,e.nextSibling),e=o,o=n.childNodes[0]}else t.appendChild(n)}const c=t.adoptedStyleSheets;if(a){let e=!1;if((a=a.map((e=>{if(e instanceof CSSStyleSheet)return e;let t=tt.get(e);return t||(t=new CSSStyleSheet,t.replaceSync(e),tt.set(e,t)),t}))).length===c.length){e=!0;for(let t=0;t<a.length;t+=1)if(a[t]!==c[t]){e=!1;break}}e||(t.adoptedStyleSheets=a)}else c&&c.length&&(t.adoptedStyleSheets=[]);const d=s.prevArgs;s.prevArgs=n;for(let t=0;t<s.markers.length;t+=1){const[o,r]=s.markers[t];if(!d||d[t]!==n[t])try{r(e,o,n[t],d?d[t]:void 0)}catch(n){throw"production"!==Fe.env.NODE_ENV&&console.error(`Following error was thrown when updating a template expression in ${h(e)}\n${nt(i,t)}`),n}}t.nodeType!==Node.TEXT_NODE&&p((t=>{e.shadowRoot&&(d?t.styleSubtree(e):t.styleElement(e))}))}}(e,n,!s&&a),ut.set(c,d)),d(r,i,t,s&&a)};return Object.assign(o,ht)}function mt(e,...t){return bt(e,t)}Object.assign(mt,r),Object.assign((function(e,...t){return bt(e,t,!0)}),r),H("group-row",{render:()=>mt`<div><slot></div>`.style(gt)});const gt="\n:host {\n  display: flex;\n  flex: 1 1;\n  flex-direction: row;\n}\ndiv {\n  display: flex;\n  flex-direction: row;\n  flex: 1 1;\n}\n";H("group-column",{render:()=>mt`<div><slot></div>`.style(yt)});const yt="\n:host {\n  display: flex;\n  flex-direction: column;\n  flex: 1 1;\n}\ndiv {\n  display: flex;\n  flex-direction: column;\n  flex: 1 1;\n}\n";function vt(e){const t=e.shadowRoot.querySelector("select").value,n=parseInt(e.shadowRoot.querySelector("#channelBox .selected").innerText)||0;!function(e,t,n={}){e.dispatchEvent(new CustomEvent(t,{bubbles:!1,...n}))}(e,"config-done",{detail:{deviceId:t,globalChannel:n}}),document.getElementById("pageMask").style.display="none",document.body.removeChild(e)}function wt(e){e.shadowRoot.querySelector("#start").classList.add("enabled"),e.shadowRoot.querySelector("#start").disabled=!1}function Et(e,t){e.shadowRoot.querySelector("#channelBox .selected").classList.replace("selected","unselected"),t.target.classList.replace("unselected","selected")}H("midi-config",{render:()=>{0==e.outputs.size&&alert("No MIDI output devices found! 😢\nConnect a MIDI device and reload the page"),document.getElementById("pageMask").style.display="block";var t=Array.from(Array(16).keys());return mt`
      <div id="dialog">
        <div id="container">
          <div class="box">
            Select MIDI Device
            <select id="deviceSelect" size="5" id="deviceList" onchange="${wt}">
              ${Array.from(e.outputs.entries()).map((e=>mt`<option value="${e[0]}">${e[1].name}</option>`))}
            </select>
            <br />
          </div>
          <div class="box" id="channelBox">
            Global MIDI Channel<br />
            ${t.map((e=>mt`<button onclick="${Et}" class="unselected">${e+1}</button>`))}<button
              class="selected"
              onclick="${Et}"
            >
              Off
            </button>
          </div>
        </div>
        <button onclick="${vt}" id="start" disabled="true">Done</button>
      </div>
    `.style(xt)}});const xt="\n#dialog {\n  border: var(--b-width) solid;\n  border-color: #11dd11;\n  border-radius: var(--b-radius);\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  padding: 1rem;\n  transform: translate(-50%, -50%);\n  z-index: 100;\n  background-color: var(--bg);\n  width: 80%\n}\n#container {\n  display: flex;\n}\n.box {\n  flex: 1;\n  margin: 0.5rem;\n  color: #dddddd;\n  font-size: 2rem;\n}\n#deviceSelect {\n  scrollbar-width: none; \n  background-color: var(--bg);\n  color: #bbbbbb;\n  font-size: 1.5rem;\n  width: 100%;\n  overflow-y: auto;\n  border: var(--b-width) solid;\n  border-color: #222222;\n  border-radius: var(--b-radius);\n  height: 80%;\n  margin: 0.2rem;\n  outline: none;\n  font-family: var(--font)\n}\nbutton {\n  border: var(--b-width) solid;\n  border-color: #555555;\n  border-radius: var(--b-radius);\n  background-color: var(--bg);\n  font-size: 2rem;\n}\n#channelBox button {\n  width: 4rem;\n  margin: 0.2rem;\n}\n#start {\n  margin-top: 1rem;\n  width: 100%;\n  border-color: #777777;\n  color: #777777;\n}\n.selected {\n  color: var(--bg);\n  background-color: darkblue;\n  border-color: white;\n  color: white;\n  outline: none;\n}\n.unselected {\n  color: #bbbbbb;\n  background-color: var(--bg);\n  border-color: #555555;\n}\n.enabled {\n  color: white !important;\n  border-color: white !important;\n}\n";H("midi-slider",{_previousPos:null,_update:{observe:(e,t,n)=>{e._previousPos={x:t.x,y:t.y};var o=0;(o=e.horizontal?e.value+t.dx:e.value-t.dy)>e.max&&(o=e.max),o<e.min&&(o=e.min),e.value=Math.round(o)}},value:0,chan:1,cc:-1,nrpn:"",min:0,max:127,colour:w("#ffffff"),label:"__unset__",horizontal:!1,render:({value:e,colour:t,label:n,min:o,max:r,cc:i,chan:c,horizontal:f,nrpn:u})=>{e>r&&(e=r),e<o&&(e=o);const p=Math.round((e-o)/(r-o)*100);"__unset__"===n&&(n="%v");const h=`div {\n      background: linear-gradient(to ${f?"right":"top"}, ${s(t)} ${p}%, var(--bg) ${p}%);\n      color: ${t};\n      border-color: ${t};\n    }`;return i&&d(i,c,e),u&&l(u,c,e,r>127),mt`<div innerHTML="${a(n,e,p,c,i)}"></div>`.style(kt,h)}});const kt="\n  :host {\n    flex: 1 1;\n    display: flex;\n    margin: var(--spacing);\n  }\n  div {\n    font-size: 4vw;\n    display: flex;\n    flex: 1 1;\n    border: var(--b-width) solid;\n    border-radius: var(--b-radius);\n    justify-content: center;\n    align-items: center;\n    text-align: center;\n    line-height: 0.9em;\n    cursor: pointer;\n    overflow: hidden;\n    width: 1px;\n    user-select: none;\n  }\n";H("midi-encoder",{_previousPos:null,_update:{observe:(e,t,n)=>{e._previousPos={x:t.x,y:t.y};var o=0;(o=e.horizontal?e.value+t.dx:e.value-t.dy)>e.max&&(o=e.max),o<e.min&&(o=e.min),e.value=Math.round(o)}},value:0,chan:1,cc:-1,nrpn:"",min:0,max:127,colour:w("#ffffff"),label:"__unset__",horizontal:!1,render:({value:e,colour:t,label:n,min:o,max:r,chan:i,cc:s,nrpn:c})=>{e>r&&(e=r),e<o&&(e=o);const f=Math.round((e-o)/(r-o)*100),u=(e-o)/(r-o)*75;return"__unset__"===n&&(n="%v"),s&&d(s,i,e),c&&l(c,i,e,r>127),mt`<div>
      <svg viewBox="0 0 36 36">
        <path
          d="M18 2.0
a 16 16 0 0 1 0 32
a 16 16 0 0 1 0 -32"
          fill="none"
          stroke="${t}"
          stroke-opacity="0.3"
          stroke-width="0.25rem"
          stroke-dasharray="75, 100"
          transform="rotate(226 18 18)"
          stroke-linecap="round"
        />
        <path
          d="M18 2.0
a 16 16 0 0 1 0 32
a 16 16 0 0 1 0 -32"
          fill="none"
          stroke="${t}"
          stroke-width="0.25rem"
          stroke-dasharray="${u}, 100"
          transform="rotate(226 18 18)"
          stroke-linecap="round"
        />
      </svg>
      <div class="label" style="color: ${t}" innerHTML="${a(n,e,f,i,s)}"></div>
    </div>`.style(Nt)}});const Nt="\n  :host {\n    flex: 1 1;\n    display: flex;\n    margin: var(--spacing);\n  }\n  svg {\n    width: 100%;\n    height: 100%;\n  }\n  div {\n    color: white;\n    font-size: 5vw;\n    display: flex;\n    flex: 1 1;\n    justify-content: center;\n    align-items: center;\n    cursor: pointer;\n    overflow: hidden;\n    user-select: none;\n    position: relative;\n    margin: auto;\n  }\n  .label {\n    position: absolute ;\n    z-index: 40;\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%, -50%);\n    text-align: center;\n    line-height: 0.9em;\n  }\n";function Ot(e,t){t.preventDefault(),e.toggle||(e._pressed=!1,e.note&&c(e.note,e.chan,e.velo))}function jt(e,o){o.preventDefault(),e.toggle?e._pressed=!e._pressed:e._pressed=!0,e._pressed?(e.cc&&d(e.cc,e.chan,e.value),e.nrpn&&l(e.nrpn,e.chan,e.value,e.highResNrpn),e.note&&function(e,o=1,r=127){if(console.log("NODE ON "+e),!t)return;const i=n>0?n:o;midOut.send([i-1+144,e,r])}(e.note,e.chan,e.velo)):e.toggle&&e.note&&c(e.note,e.chan,e.velo)}H("midi-button",{_pressed:!1,chan:1,cc:-1,nrpn:"",highResNrpn:!1,value:0,velo:127,note:-1,colour:w("#ffffff"),label:"",toggle:!1,render:({label:e,colour:t,_pressed:n,chan:o,cc:r})=>{const i=`button {\n      background-color: ${n?`${s(t)}`:"var(--bg)"};\n      color: ${t};\n      border-color: ${t};\n    }`;return mt`<button
      onmouseup="${Ot}"
      ontouchend="${Ot}"
      onmousedown="${jt}"
      ontouchstart="${jt}"
      innerHTML="${a(e,"","",o,r)}"
    ></button>`.style($t,i)}});const $t="\n  :host {\n    flex: 1 1;\n    display: flex;\n    margin: var(--spacing);\n  }\n  button {\n    font-family: var(--font);\n    background-color: var(--bg);\n    font-size: 4vw;\n    display: flex;\n    flex: 1 1;\n    border: var(--b-width) solid;\n    border-radius: var(--b-radius);\n    justify-content: center;\n    align-items: center;\n    cursor: pointer;\n    overflow: hidden;\n    width: 1px;\n    user-select: none;\n  }\n";let Tt=[];function Mt(e){for(let t of e.changedTouches)Tt[t.identifier]=t.target}function St(e){for(let t of e.changedTouches)Dt(t.target,t.screenX,t.screenY)}function _t(e){for(let t of e.changedTouches)Tt.splice(t.identifier,1)}function Pt(e){Tt[20]=e.target}function At(e){Dt(Tt[20],e.screenX,e.screenY)}function Ct(e){Tt.splice(20,1)}function Dt(e,t,n){if(!e)return;let o=0,r=0;e._previousPos&&(o=t-e._previousPos.x,r=n-e._previousPos.y,o=i(o,-12,12)/1,r=i(r,-12,12)/1),e._update={dx:o,dy:r,x:t,y:n}}function zt(e){e.preventDefault()}window.addEventListener("load",(async()=>{await async function(){const e=document.createElement("div");e.id="pageMask",document.body.append(e);const t=document.createElement("style");t.textContent="\n:root {\n  --bg: black;\n  \n  --b-radius: 0.7rem;\n  --b-width: 0.3rem;\n  --spacing: 0.5%;\n\n  --font: Consolas, 'Courier New', monospace\n}\n\nhtml, body {\n  height: 100%;\n  margin: 0;\n  padding: 0;\n  overflow-y: hidden;\n  color: var(--grey);\n  background-color: var(--bg);\n  font-family: var(--font);\n  touch-action: none;\n}\n\nbody {\n  display: flex;\n  flex-direction: column;\n}\n\n#pageMask {\n  background: rgba(0, 0, 0, 0.8);\n  position: fixed;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  display: none;\n}",document.head.append(t),fetch}(),async function(){try{e=await navigator.requestMIDIAccess();const o=document.createElement("midi-config");o.addEventListener("config-done",(o=>{o.detail&&o.detail.deviceId?(t=e.outputs.get(o.detail.deviceId),n=o.detail.globalChannel):alert("No MIDI device id returned, MIDI output device not opened!")})),document.body.appendChild(o)}catch(e){console.error(e),alert("Unable to get MIDI access\nYour browser doesn't support MIDI, try using a modern browser")}}(),window.addEventListener("mousedown",Pt,!1),window.addEventListener("mousemove",At,!1),window.addEventListener("mouseup",Ct,!1),window.addEventListener("touchstart",Mt,!1),window.addEventListener("touchmove",St,!1),window.addEventListener("touchend",_t,!1),window.addEventListener("dblclick",zt,!1),window.addEventListener("contextmenu",zt,!1)}))})();