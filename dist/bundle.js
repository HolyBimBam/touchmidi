(()=>{"use strict";var e,n,t,o={d:(e,n)=>{for(var t in n)o.o(n,t)&&!o.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},o:(e,n)=>Object.prototype.hasOwnProperty.call(e,n),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},r={};async function a(){try{return e||(e=await navigator.requestMIDIAccess()),e}catch(e){console.error("MIDI getAccess failed",e)}}function i(e,o=1,r=0){if(!n)return;const a=t>0?t:o;u(e,"note"),u(r,"velocity"),d(a),console.debug(`MIDI note off - note:${e}, velo:${r}, channel:${a}`),n.send([a-1+128,e,r])}function c(e,o=1,r=0){if(!n)return;const a=t>0?t:o;u(e,"CC"),u(r),d(a),console.debug(`MIDI control - cc:${e}, val:${r}, channel:${a}`),n.send([a-1+176,e,r])}function l(e,o=1,r=0,a=!1){if(!n)return;const i=t>0?t:o;try{const t=e.split(","),c=parseInt(t[0].trim()),l=parseInt(t[1].trim());if(u(c,"NRPN LSB"),u(l,"NRPN MSB"),d(i),n.send([o-1+176,99,l]),n.send([o-1+176,98,c]),console.debug(`MIDI nrpn - lsb:${c}, msb:${l}, val:${r}, channel:${i}, highRes:${a}`),a){if(!Number.isInteger(r))throw"Bad value";const e=Math.floor(r/128),t=Math.floor(r%128);n.send([o-1+176,6,e]),n.send([o-1+176,38,t])}else u(r),n.send([o-1+176,6,r])}catch(n){console.warn("Malformed NRPN, it should be two integers separated by commas:",e,r)}}function d(e){if(!(e>0&&e<=16&&Number.isInteger(e)))throw`MIDI channel '${e}' is invalid, should be an integer between 1 and 16`}function u(e,n="value"){if(!(e>=0&&e<=127&&Number.isInteger(e)))throw`MIDI value '${e}' for '${n}' is invalid, should be an integer between 0 and 127`}function s(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function f(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?s(Object(t),!0).forEach((function(n){p(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function p(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}o.r(r),o.d(r,{resolve:()=>Ze,set:()=>Ge});var b=new Map;function v(e){var n=b.get(e);return void 0===n&&(n=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),b.set(e,n)),n}function h(e,n){var t=window.ShadyCSS;return t&&!t.nativeShadow?e(t):n}function m(e){return"<".concat(String(e.tagName).toLowerCase(),">")}var y="ActiveXObject"in window,g=Promise.resolve(),w=new WeakMap;function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var S=function(e){return e},E=function(e){if("object"!==x(e))throw TypeError("Assigned value must be an object: ".concat(x(e)));return e&&Object.freeze(e)};function k(e,n){var t=x(e),o=S;switch(t){case"string":o=String;break;case"number":o=Number;break;case"boolean":o=Boolean;break;case"function":e=(o=e)();break;case"object":e&&Object.freeze(e),o=E}return{get:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return t},set:function(e,n,t){return o(n,t)},connect:"object"!==t&&"undefined"!==t?function(t,r,a){if(t[r]===e){var i=v(r);if(t.hasAttribute(i)){var c=t.getAttribute(i);t[r]=""===c&&o===Boolean||c}}return n&&n(t,r,a)}:n}}function N(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function $(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?N(Object(t),!0).forEach((function(n){O(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):N(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function O(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var M=new WeakMap,j=new Set;function I(){try{j.forEach((function(e){try{M.get(e)(),j.delete(e)}catch(n){throw j.delete(e),n}}))}catch(e){throw j.size&&I(),e}}function T(e){j.size||requestAnimationFrame(I),j.add(e)}var A=new WeakMap;function C(e,n){var t=A.get(e);t||(t=new Map,A.set(e,t));var o=t.get(n);return o||(o={target:e,key:n,value:void 0,contexts:void 0,deps:void 0,state:0,checksum:0,observed:!1},t.set(n,o)),o}function D(e){var n=e.state;return e.deps&&e.deps.forEach((function(e){n+=e.state})),n}function P(e){e.observed&&T(e),e.contexts&&e.contexts.forEach(P)}function z(e,n){n&&n.forEach((function(n){e.deps.add(n),e.observed&&(n.contexts||(n.contexts=new Set),n.contexts.add(e)),z(e,n.deps)}))}var L=new Set;function R(e,n,t,o){var r=C(e,n);if(L.size&&L.has(r))throw Error("Circular get invocation is forbidden: '".concat(n,"'"));if(L.forEach((function(e){e.deps||(e.deps=new Set),e.deps.add(r),e.observed&&(r.contexts||(r.contexts=new Set),r.contexts.add(e))})),(o&&o(r.value)||!o)&&r.checksum&&r.checksum===D(r))return r.value;try{L.add(r),r.observed&&r.deps&&r.deps.size&&r.deps.forEach((function(e){e.contexts&&e.contexts.delete(r)})),r.deps=void 0;var a=t(e,r.value);r.deps&&r.deps.forEach((function(e){z(r,e.deps)})),a!==r.value&&(r.state+=1,r.value=a,P(r)),r.checksum=D(r),L.delete(r)}catch(e){throw r.checksum=0,L.delete(r),L.forEach((function(e){e.deps.delete(r),e.observed&&r.contexts.delete(e)})),e}return r.value}var V=new Set;function q(e,n,t,o){if(L.size)throw Error("Invalidating property in chain of get calls is forbidden: '".concat(n,"'"));!function(e,n,t){e.checksum=0,e.state+=1,P(e),t&&function(e){V.size||requestAnimationFrame((function(){V.forEach((function(e){(!e.contexts||e.contexts&&0===e.contexts.size)&&A.get(e.target).delete(e.key)})),V.clear()})),V.add(e)}(e),n&&(e.value=void 0)}(C(e,n),t,o)}function W(e,n,t,o){var r,a=C(e,n);a.observed=!0;var i=function(e,n){return M.set(e,n),T(e),function(){j.delete(e),M.delete(e)}}(a,(function(){var a=R(e,n,t);a!==r&&(o(e,a,r),r=a)}));return a.deps&&a.deps.forEach((function(e){e.contexts||(e.contexts=new Set),e.contexts.add(a)})),function(){i(),a.observed=!1,a.deps&&a.deps.size&&a.deps.forEach((function(e){e.contexts&&e.contexts.delete(a)}))}}function X(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function B(e,n){return!n||"object"!==J(n)&&"function"!=typeof n?F(e):n}function F(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H(e){var n="function"==typeof Map?new Map:void 0;return(H=function(e){if(null===e||(t=e,-1===Function.toString.call(t).indexOf("[native code]")))return e;var t;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,o)}function o(){return Y(e,arguments,Z(this).constructor)}return o.prototype=Object.create(e.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),U(o,e)})(e)}function Y(e,n,t){return(Y=G()?Reflect.construct:function(e,n,t){var o=[null];o.push.apply(o,n);var r=new(Function.bind.apply(e,o));return t&&U(r,t.prototype),r}).apply(null,arguments)}function G(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function U(e,n){return(U=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}function Z(e){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function J(e){return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}try{K.env.NODE_ENV}catch(e){var K={env:{NODE_ENV:"production"}}}var Q,ee=function(e,n){return n},ne=new WeakMap,te=new WeakMap;function oe(e,n){e.hybrids=n;var t=[],o=Object.keys(n);ne.set(e,t),te.set(e,o),o.forEach((function(o){var r,a=n[o],i=J(a);r="function"===i?"render"===o?function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("function"!=typeof e)throw TypeError("The first argument must be a function: ".concat(_(e)));var t=$({shadowRoot:!0},n),o={mode:"open"};return"object"===_(t.shadowRoot)&&Object.assign(o,t.shadowRoot),{get:function(n){var r=e(n),a=n;return t.shadowRoot&&(n.shadowRoot||n.attachShadow(o),a=n.shadowRoot),function(){return r(n,a),a}},observe:function(e,n){n()}}}(a):{get:a}:"object"!==i||null===a||Array.isArray(a)?k(a):{get:a.get||ee,set:a.set||!a.get&&ee||void 0,connect:a.connect,observe:a.observe},Object.defineProperty(e.prototype,o,{get:function(){return R(this,o,r.get)},set:r.set&&function(e){!function(e,n,t,o){var r=C(e,n),a=t(e,o,r.value);a!==r.value&&(r.checksum=0,r.state+=1,r.value=a,P(r))}(this,o,r.set,e)},enumerable:!0,configurable:"production"!==K.env.NODE_ENV}),r.observe&&t.unshift((function(e){return W(e,o,r.get,r.observe)})),r.connect&&t.push((function(e){return r.connect(e,o,(function(){q(e,o)}))}))}))}if("production"!==K.env.NODE_ENV){var re=function e(n,t){t(n),Array.from(n.children).forEach((function(n){return e(n,t)})),n.shadowRoot&&Array.from(n.shadowRoot.children).forEach((function(n){return e(n,t)}))},ae=new Map;Q=function(e,n){ae.size||g.then((function(){re(document.body,(function(e){if(ae.has(e.constructor)){var n=ae.get(e.constructor);e.disconnectedCallback(),Object.keys(e.constructor.hybrids).forEach((function(t){q(e,t,e.constructor.hybrids[t]!==n[t])})),e.connectedCallback()}})),ae.clear()})),ae.set(e,n)}}var ie=new WeakMap;function ce(e,n){var t=J(n);if("object"!==t&&"function"!==t)throw TypeError("Second argument must be an object or a function: ".concat(t));if(null!==e){var o=window.customElements.get(e);if("function"===t)return o!==n?window.customElements.define(e,n):o;if(o){if(o.hybrids===n)return o;if("production"!==K.env.NODE_ENV&&o.hybrids){Object.keys(o.hybrids).forEach((function(e){delete o.prototype[e]}));var r=o.hybrids;return oe(o,n),Q(o,r),o}throw Error("Element '".concat(e,"' already defined"))}}var a=function(e){!function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&U(e,n)}(a,e);var n,t,o,r=(n=a,function(){var e,t=Z(n);if(G()){var o=Z(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return B(this,e)});function a(){var e;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,a),e=r.call(this);for(var n=te.get(a),t=0;t<n.length;t+=1){var o=n[t];if(Object.prototype.hasOwnProperty.call(F(e),o)){var i=e[o];delete e[o],e[o]=i}}return e}return t=a,(o=[{key:"connectedCallback",value:function(){for(var e=ne.get(a),n=[],t=0;t<e.length;t+=1){var o=e[t](this);o&&n.push(o)}ie.set(this,n)}},{key:"disconnectedCallback",value:function(){for(var e=ie.get(this),n=0;n<e.length;n+=1)e[n]()}}])&&X(t.prototype,o),a}(H(HTMLElement));return oe(a,n),null!==e&&(Object.defineProperty(a,"name",{get:function(){return e}}),customElements.define(e,a)),a}function le(e){return Object.keys(e).reduce((function(n,t){var o=v(t.replace(/((?!([A-Z]{2}|^))[A-Z])/g,"-$1"));return n[t]=ce(o,e[t]),n}),{})}function de(){return"object"===J(arguments.length<=0?void 0:arguments[0])&&null!==(arguments.length<=0?void 0:arguments[0])?le(arguments.length<=0?void 0:arguments[0]):ce.apply(void 0,arguments)}var ue=new WeakMap,se=function(e,n){return ue.get(e)||(n&&ue.set(e,n),n)};function fe(e){for(var n;e&&(n=se(e))&&n.endNode;)e=n.endNode;return e}function pe(e){if(e.nodeType!==Node.TEXT_NODE)for(var n=e.childNodes[0];n;)e.removeChild(n),n=e.childNodes[0];else{var t=se(e);if(t.startNode)for(var o=fe(t.endNode),r=t.startNode,a=o.nextSibling;r;){var i=r.nextSibling;r.parentNode.removeChild(r),r=i!==a&&i}}}var be=new WeakMap;function ve(e,n){var t=se(e),o=t.startNode,r=fe(t.endNode);n.parentNode.insertBefore(e,n.nextSibling);for(var a=e,i=o;i;){var c=i.nextSibling;a.parentNode.insertBefore(i,a.nextSibling),a=i,i=c!==r.nextSibling&&c}}function he(e){return(he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function me(e,n,t){var o=Array.isArray(t)?"array":he(t),r=se(n,{});switch(r.type!==o&&(pe(n),"array"===o&&be.delete(n),r=function(e,n){return ue.set(e,n),n}(n,{type:o}),""!==n.textContent&&(n.textContent="")),o){case"function":t(e,n);break;case"array":!function(e,n,t,o){var r=be.get(n),a=t.map((function(e,n){return{id:Object.prototype.hasOwnProperty.call(e,"id")?e.id:n,value:e,placeholder:null,available:!0}}));if(be.set(n,a),r){var i=new Set;a.forEach((function(e){return i.add(e.id)})),r=r.filter((function(e){return!!i.has(e.id)||(pe(e.placeholder),e.placeholder.parentNode.removeChild(e.placeholder),!1)}))}for(var c=n,l=t.length-1,d=se(n),u=0;u<a.length;u+=1){var s=a[u],f=void 0;if(r)for(var p=0;p<r.length;p+=1)if(r[p].available&&r[p].id===s.id){f=r[p];break}f?(f.available=!1,s.placeholder=f.placeholder,s.placeholder.previousSibling!==c&&ve(s.placeholder,c),f.value!==s.value&&o(e,s.placeholder,s.value)):(s.placeholder=document.createTextNode(""),c.parentNode.insertBefore(s.placeholder,c.nextSibling),o(e,s.placeholder,s.value)),c=fe(se(s.placeholder).endNode||s.placeholder),0===u&&(d.startNode=s.placeholder),u===l&&(d.endNode=c)}r&&r.forEach((function(e){e.available&&(pe(e.placeholder),e.placeholder.parentNode.removeChild(e.placeholder))}))}(e,n,t,me);break;default:n.textContent="number"===o||t?t:""}}function ye(e){return(ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ge=new WeakMap;function we(e){return(we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var xe=new WeakMap;function Se(e,n,t){var o=xe.get(n)||new Set,r=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set;return Array.isArray(e)?e.forEach((function(e){return n.add(e)})):null!==e&&"object"===we(e)?Object.keys(e).forEach((function(t){return e[t]&&n.add(t)})):n.add(e),n}(t);xe.set(n,r),r.forEach((function(e){n.classList.add(e),o.delete(e)})),o.forEach((function(e){n.classList.remove(e)}))}function Ee(e){return(Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ke=new WeakMap;function Ne(e,n,t){if(null===t||"object"!==Ee(t))throw TypeError("Style value must be an object in ".concat(m(n),":"),t);var o=ke.get(n)||new Map,r=Object.keys(t).reduce((function(e,r){var a=v(r),i=t[r];return i||0===i?n.style.setProperty(a,i):n.style.removeProperty(a),e.set(a,i),o.delete(a),e}),new Map);o.forEach((function(e,t){n.style[t]=""})),ke.set(n,r)}function $e(e,n,t){if("on"===n.substr(0,2))return o=n.substr(2),function(e,n,t,r){if(r){var a=ge.get(n);a&&n.removeEventListener(o,a.get(r),void 0!==r.options&&r.options)}if(t){if("function"!=typeof t)throw Error("Event listener must be a function: ".concat(ye(t)));var i=ge.get(n);i||(i=new WeakMap,ge.set(n,i));var c=t.bind(null,e);i.set(t,c),n.addEventListener(o,c,void 0!==t.options&&t.options)}};var o;switch(e){case"class":return Se;case"style":return Ne;default:return function(o,r,a){if(t||r instanceof SVGElement||!(n in r))if(!1===a||null==a)r.removeAttribute(e);else{var i=!0===a?"":String(a);r.setAttribute(e,i)}else r[n]!==a&&(r[n]=a)}}}function Oe(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var t=[],o=!0,r=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(o=(i=c.next()).done)&&(t.push(i.value),!n||t.length!==n);o=!0);}catch(e){r=!0,a=e}finally{try{o||null==c.return||c.return()}finally{if(r)throw a}}return t}}(e,n)||function(e,n){if(e){if("string"==typeof e)return _e(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_e(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _e(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,o=new Array(n);t<n;t++)o[t]=e[t];return o}function Me(e){return(Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}try{je.env.NODE_ENV}catch(e){var je={env:{NODE_ENV:"production"}}}var Ie=Date.now(),Te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return"{{h-".concat(Ie,"-").concat(e,"}}")},Ae=Te("(\\d+)"),Ce=new RegExp("^".concat(Ae,"$")),De=new RegExp(Ae,"g"),Pe="--".concat(Ie,"--"),ze=new RegExp(Pe,"g"),Le=new WeakMap,Re="object"===Me(window.ShadyDOM)&&window.ShadyDOM.inUse?function(e){var n;return{get currentNode(){return n},nextNode:function(){if(void 0===n)n=e.childNodes[0];else if(n.childNodes.length)n=n.childNodes[0];else if(n.nextSibling)n=n.nextSibling;else{var t=n.parentNode;for(n=t.nextSibling;!n&&t!==e;)t=t.parentNode,n=t.nextSibling}return!!n}}}:function(e){return document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT,null,!1)},Ve=document.createElement("div"),qe=new Map;function We(e,n){var t=Te(n),o=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=(e=e.replace(/(^[\n\s\t ]+)|([\n\s\t ]+$)+/g,"")).indexOf("\n");if(t>-1){var o=0-n-2;for(t+=1;" "===e[t]&&t<e.length;t+=1)o+=1;return e.replace(/\n +/g,(function(e){return e.substr(0,Math.max(e.length-o,1))}))}return e}(e).split("\n").filter((function(e){return e})).map((function(e){var n=e.indexOf(t);return n>-1?"| ".concat(e,"\n--").concat("-".repeat(n)).concat("^".repeat(6)):"| ".concat(e)})).join("\n").replace(De,"${...}");return"".concat(o)}function Xe(e,n,t){var o=document.createElement("template"),r=[],a=function(e,n){var t=e.reduce((function(n,t,o){return 0===o?t:e.slice(o).join("").match(/^\s*<\/\s*(table|tr|thead|tbody|tfoot|colgroup)>/)?"".concat(n,"\x3c!--").concat(Te(o-1),"--\x3e").concat(t):n+Te(o-1)+t}),"");return n&&(t+="<style>\n".concat(n.join("\n/*------*/\n"),"\n</style>")),y?t.replace(/style\s*=\s*(["][^"]+["]|['][^']+[']|[^\s"'<>/]+)/g,(function(e){return"".concat(Pe).concat(e)})):t}(e,t);if(n&&(a="<svg>".concat(a,"</svg>")),y?o.innerHTML=a:(Ve.innerHTML="<template>".concat(a,"</template>"),o.content.appendChild(Ve.children[0].content)),n){var i=o.content.firstChild;o.content.removeChild(i),Array.from(i.childNodes).forEach((function(e){return o.content.appendChild(e)}))}!function(e){for(var n,t=document.createNodeIterator(e,NodeFilter.SHOW_COMMENT,null,!1);n=t.nextNode();)Ce.test(n.textContent)&&(n.parentNode.insertBefore(document.createTextNode(n.textContent),n),n.parentNode.removeChild(n))}(o.content);for(var c=Re(o.content),l=0,d=function(){var t=c.currentNode;if(t.nodeType===Node.TEXT_NODE){var o=t.textContent;if(!o.match(Ce)){var a=o.match(De);if(a){var i=t;a.reduce((function(e,n){var t=Oe(e.pop().split(n),2),o=t[0],r=t[1];return o&&e.push(o),e.push(n),r&&e.push(r),e}),[o]).forEach((function(e,n){0===n?i.textContent=e:i=i.parentNode.insertBefore(document.createTextNode(e),i.nextSibling)}))}}var d=t.textContent.match(Ce);d&&(y||(t.textContent=""),r[d[1]]=[l,me])}else t.nodeType===Node.ELEMENT_NODE&&Array.from(t.attributes).forEach((function(o){var a=o.value.trim(),i=y?o.name.replace(Pe,""):o.name,c=a.match(Ce);if(c){var d=e[c[1]].replace(/\s*=\s*['"]*$/g,"").split(/\s+/).pop();r[c[1]]=[l,$e(i,d,n)],t.removeAttribute(o.name)}else{var u=a.match(De);if(u){var s="attr__".concat(i);u.forEach((function(e,n){var t=Oe(e.match(Ce),2)[1];r[t]=[l,function(t,o,r){var c=se(o,{});c[s]=(c[s]||a).replace(e,null==r?"":r),1!==u.length&&n+1!==u.length||(o.setAttribute(i,c[s]),c[s]=void 0)}]})),o.value="",y&&i!==o.name&&(t.removeAttribute(o.name),t.setAttribute(i,""))}}}));l+=1};c.nextNode();)d();return function(e,n,t,i){var c=se(n,{type:"function"});if(o!==c.template){(c.template||n.nodeType===Node.ELEMENT_NODE)&&pe(n),c.prevArgs=null;var l=document.importNode(function(e,n){return n?h((function(t){var o=Le.get(e);o||(o=new Map,Le.set(e,o));var r=o.get(n);if(!r){(r=document.createElement("template")).content.appendChild(e.content.cloneNode(!0)),o.set(n,r);var a=r.content.querySelectorAll("style");Array.from(a).forEach((function(e){for(var n=e.childNodes.length+1,t=0;t<n;t+=1)e.parentNode.insertBefore(document.createTextNode(Te()),e)})),t.prepareTemplate(r,n.toLowerCase())}return r}),e):e}(o,e.tagName).content,!0),d=Re(l),u=r.slice(0),s=0,f=u.shift(),p=[];for(c.template=o,c.markers=p;d.nextNode();){var b=d.currentNode;if(b.nodeType===Node.TEXT_NODE)Ce.test(b.textContent)?b.textContent="":y&&(b.textContent=b.textContent.replace(ze,""));else if("production"!==je.env.NODE_ENV&&b.nodeType===Node.ELEMENT_NODE&&b.tagName.indexOf("-")>-1&&!customElements.get(b.tagName.toLowerCase()))throw Error("Missing ".concat(m(b)," element definition in ").concat(m(e)));for(;f&&f[0]===s;)p.push([b,f[1]]),f=u.shift();s+=1}if(n.nodeType===Node.TEXT_NODE){c.startNode=l.childNodes[0],c.endNode=l.childNodes[l.childNodes.length-1];for(var v=n,g=l.childNodes[0];g;)n.parentNode.insertBefore(g,v.nextSibling),v=g,g=l.childNodes[0]}else n.appendChild(l)}var w=n.adoptedStyleSheets;if(i){var x=!1;if((i=i.map((function(e){if(e instanceof CSSStyleSheet)return e;var n=qe.get(e);return n||((n=new CSSStyleSheet).replaceSync(e),qe.set(e,n)),n}))).length===w.length){x=!0;for(var S=0;S<i.length;S+=1)if(i[S]!==w[S]){x=!1;break}}x||(n.adoptedStyleSheets=i)}else w&&w.length&&(n.adoptedStyleSheets=[]);var E=c.prevArgs;c.prevArgs=t;for(var k=0;k<c.markers.length;k+=1){var N=Oe(c.markers[k],2),$=N[0],O=N[1];if(!E||E[k]!==t[k])try{O(e,$,t[k],E?E[k]:void 0)}catch(n){throw"production"!==je.env.NODE_ENV&&console.error("Following error was thrown when updating a template expression in ".concat(m(e),"\n").concat(We(a,k))),n}}n.nodeType!==Node.TEXT_NODE&&h((function(n){e.shadowRoot&&(E?n.styleSubtree(e):n.styleElement(e))}))}}function Be(e){return(Be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fe(e,n){var t,o=e.target;switch(o.type){case"radio":case"checkbox":t=o.checked&&o.value;break;case"file":t=o.files;break;default:t=o.value}n(t)}function He(e,n){return e.split(".").reverse().reduce((function(e,t){return function(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}({},t,e||n)}),null)}var Ye=new Map;function Ge(e,n){if(!e)throw Error("The first argument must be a property name or an object instance: ".concat(e));if("object"===Be(e)){if(void 0===n)throw Error("For model instance property the second argument must be defined");var t=w.get(e);if(!t)throw Error("Provided object must be a model instance of the store");return function(o,r){Fe(r,(function(o){t.set(e,null!==n?He(n,o):n)}))}}if(2===arguments.length)return function(t){t[e]=n};var o=Ye.get(e);return o||(o=function(n,t){Fe(t,(function(t){n[e]=t}))},Ye.set(e,o)),o}var Ue=new WeakMap;function Ze(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200;return function(o,r){var a;n&&(a=setTimeout((function(){a=void 0,requestAnimationFrame((function(){n(o,r)}))}),t)),Ue.set(r,e),e.then((function(n){a&&clearTimeout(a),Ue.get(r)===e&&(n(o,r),Ue.set(r,null))}))}}var Je=Te(),Ke=Te("svg"),Qe=/@import/,en=new Map,nn=new WeakMap,tn={define:function(e){return de(e),this},key:function(e){return this.id=e,this},style:function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return nn.set(this,n.filter((function(e){return e}))),this}};function on(e,n,t){return Object.assign((function o(r){var a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r,c=nn.get(o),l=e.join(Je);if(c){var d=c.join(Je);(a=!!i.adoptedStyleSheets&&!Qe.test(d))||(l+=d)}t&&(l+=Ke);var u=en.get(l);u||(u=Xe(e,t,!a&&c),en.set(l,u)),u(r,i,n,a&&c)}),tn)}function rn(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),o=1;o<n;o++)t[o-1]=arguments[o];return on(e,t)}Object.assign(rn,r),Object.assign((function(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),o=1;o<n;o++)t[o-1]=arguments[o];return on(e,t,!0)}),r),de("group-row",{grow:1,margin:0,border:!1,colour:k("#ffffff"),render:({grow:e,margin:n,border:t,colour:o})=>{const r=`\n    :host{\n      flex-grow: ${e};\n      margin: ${n}rem;\n    }\n    div {\n      border: ${t?"var(--b-width) solid":"none"};\n      border-color: ${o};\n    }`;return rn`<div><slot></div>`.style(":host {\n  display: flex;\n  flex-direction: row;\n  flex: 1;\n}\n\ndiv {\n  display: flex;\n  flex-direction: row;\n  flex: 1;\n  border-radius: var(--b-radius);\n}\n",r)}}),de("group-column",{grow:1,render:({grow:e})=>{const n=e?`:host{flex: ${e}} div{ flex: ${e}}`:"";return rn`<div><slot></div>`.style(":host {\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n}\n\ndiv {\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n}\n",n)}});const an="#dialog {\n  border: var(--b-width) solid;\n  border-color: #11dd11;\n  border-radius: var(--b-radius);\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  padding: 1rem;\n  transform: translate(-50%, -50%);\n  z-index: 100;\n  background-color: var(--bg);\n  width: 80%;\n  color: #dddddd;\n}\n\n#container {\n  display: flex;\n  flex-direction: column;\n}\n\n@media (orientation: landscape) {\n  #container {\n    flex-direction: row;\n  }\n}\n\n.box {\n  flex: 1;\n  margin: 0.5rem;\n  font-size: min(6vw, 1.5rem);\n}\n@media (orientation: landscape) {\n  #container {\n    flex-direction: row;\n  }\n}\n\nlabel {\n  font-size: min(5vw, 1.3rem);\n}\n\nINPUT[type='checkbox'] {\n  width: min(5vw, 1.3rem);\n  height: min(5vw, 1.3rem);\n  border-radius: var(--b-radius);\n}\n\nselect {\n  scrollbar-width: none;\n  background-color: var(--bg);\n  color: #bbbbbb;\n  font-size: min(5vw, 1.3rem);\n  width: 100%;\n  overflow-y: auto;\n  border: var(--b-width) solid;\n  border-color: #222222;\n  border-radius: var(--b-radius);\n  margin: 0.2rem;\n  outline: none;\n  font-family: var(--font);\n}\n\n#start {\n  border: var(--b-width) solid;\n  border-radius: var(--b-radius);\n  background-color: var(--bg);\n  font-size: 2rem;\n  font-family: var(--font);\n  margin-top: 1rem;\n  width: 100%;\n  background-color: darkgreen;\n  color: white;\n  border-color: #11dd11;\n}\n";function cn(e){const n=e.shadowRoot.querySelector("#deviceList").value,t=parseInt(e.shadowRoot.querySelector("#channel").value)||0,o=e.shadowRoot.querySelector("#restoreValues").checked,r=e.shadowRoot.querySelector("#fullScreen").checked;if(!n)return;o||localStorage.clear();const a=window.location.pathname.substring(window.location.pathname.lastIndexOf("/")+1);localStorage.setItem(`touchmidi.${a}.config`,JSON.stringify({deviceId:n,globalChannel:t,restoreValues:o})),function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e.dispatchEvent(new CustomEvent(n,f({bubbles:!1},t)))}(e,"config-done",{detail:{deviceId:n,globalChannel:t,restoreValues:o}}),r&&document.body.requestFullscreen(),document.getElementById("pageMask").style.display="none",document.body.removeChild(e)}function ln(e,n,t){return Math.min(Math.max(e,n),t)}function dn(e,n="",t="",o="",r="",a=""){let i=e.replaceAll("\\n","<br>");return i=i.replaceAll("%v",n),i=i.replaceAll("%c",o),i=i.replaceAll("%t",r),i=i.replaceAll("%n",a),i=i.replaceAll("%p",t),i=i.replaceAll("%%","%"),i}function un(e="",n="60"){return e.startsWith("#")?`${e}${n}`:`${function(e){var n={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};return void 0!==n[e.toLowerCase()]?n[e.toLowerCase()]:"#ffffff"}(e)}${n}`}function sn(e,n,t){if(t===Number.MIN_SAFE_INTEGER)return;const o=window.location.pathname.substring(window.location.pathname.lastIndexOf("/")+1);localStorage.setItem(`touchmidi.${o}.${e}.${n}`,t)}function fn(e,n=""){const t=window.location.pathname.substring(window.location.pathname.lastIndexOf("/")+1);n||(n=`${e.cc}${e.chan}${e.nrpn}`);const o=e.tagName.toLowerCase();return localStorage.getItem(`touchmidi.${t}.${o}.${n}`)}function pn(e,n,t){if(n.restoreValue)e.value=n.restoreValue;else{e._previousPos={x:n.x,y:n.y};var o=0;(o=e.horizontal?e.value+n.dx:e.value-n.dy)>e.max&&(o=e.max),o<e.min&&(o=e.min),e.value=Math.round(o)}}function bn(e,n){n.preventDefault(),!e.toggle&&e._pressed&&(e._pressed=!1,e.note>0&&i(e.note,e.chan))}function vn(e,o){o.preventDefault(),e.toggle?e._pressed=!e._pressed:e._pressed=!0,e._pressed?(e.cc>0&&c(e.cc,e.chan,e.value),e.nrpn&&l(e.nrpn,e.chan,e.value,e.nrpnHires),e.note>0&&function(e,o=1,r=127){if(!n)return;const a=t>0?t:o;u(e,"note"),u(r,"velocity"),d(a),console.debug(`MIDI note on - note:${e}, velo:${r}, channel:${a}`),n.send([a-1+144,e,r])}(e.note,e.chan,e.velo)):e.toggle&&(e.note>0&&i(e.note,e.chan),e.cc>0&&e.valueOff&&c(e.cc,e.chan,e.valueOff),e.nrpn&&e.valueOff&&l(e.nrpn,e.chan,e.valueOff,e.nrpnHires))}function hn(e,n){n.preventDefault(),"inc"==n.target.id?e.value=e.value+1:e.value=e.value-1,e.value>e.max&&(e.value=e.max),e.value<e.min&&(e.value=e.min),e.cc>0&&c(e.cc,e.chan,e.value)}de("midi-config",{midiAccess:{},render:({midiAccess:e})=>{if(document.getElementById("pageMask").style.display="block",!e)return void alert("No MIDI access, something went wrong!\nYou should never see this error!");if(0==e.outputs.size)return rn` <div id="dialog">
        <div class="box" style="text-align:center">
          No MIDI output devices were found &#128549;<br /><br />Please attach a MIDI device and try again
        </div>
        <button onclick="window.location.reload()" id="start" class="enabled" style="background-color:darkgreen">Reload</button>
      </div>`.style(an);const n=Array.from(Array(16).keys()),t=window.location.pathname.substring(window.location.pathname.lastIndexOf("/")+1),o=localStorage.getItem(`touchmidi.${t}.config`);let r={};return r=o?JSON.parse(o):{deviceId:"output-1",globalChannel:1,restoreValues:!0},rn`
      <div id="dialog">
        <div id="container">
          <div class="box">
            Select MIDI Device
            <select size="5" id="deviceList">
              ${Array.from(e.outputs.entries()).map((e=>rn`<option value="${e[0]}" selected="${e[0]==r.deviceId}">${e[1].name}</option>`))}
            </select>
            <br />
          </div>
          <div class="box">
            MIDI Channel
            <select id="channel">
              ${n.map((e=>rn`<option value="${e+1}" selected="${e==r.globalChannel-1}">${e+1}</option>`))}
              <option value="0">Set By Layout</option>
            </select>
          </div>
          <div class="box">
            <input type="checkbox" id="restoreValues" name="restoreValues" checked="${r.restoreValues}" />
            <label for="restoreValues">Save &amp; Restore at Startup</label>
            <br />
            <input type="checkbox" id="fullScreen" name="fullScreen" />
            <label for="fullScreen">Start Fullscreen</label>
          </div>
        </div>
        <button onclick="${cn}" id="start">Start</button>
      </div>
    `.style(an)}}),de("midi-slider",{_previousPos:null,_width:30,_update:{observe:pn},value:Number.MIN_SAFE_INTEGER,chan:1,cc:-1,nrpn:"",min:0,max:127,colour:k("#ffffff"),label:"__unset__",horizontal:!1,labelScale:1,grow:1,render:({value:e,colour:n,label:t,min:o,max:r,cc:a,chan:i,horizontal:d,nrpn:u,_width:s,labelScale:f,grow:p})=>{sn("midi-slider",`${a}${i}${u}`,e),e>r&&(e=r),e<o&&(e=o);const b=Math.round((e-o)/(r-o)*100);"__unset__"===t&&(t="%v");const v=`\n    :host { \n      flex-grow: ${p} \n    }\n    div {\n      background: linear-gradient(to ${d?"right":"top"}, ${un(n)} ${b}%, var(--bg) ${b}%);\n      color: ${n};\n      border-color: ${n};\n      font-size: ${.6*s*f}px;\n    }`;return a>0&&c(a,i,e),u&&l(u,i,e,r>127),rn`<div innerHTML="${dn(t,e,b,i,a)}"></div>`.style(":host {\n  flex: 1 1;\n  display: flex;\n  margin: var(--spacing);\n}\n\ndiv {\n  font-size: 4vw;\n  display: flex;\n  flex: 1 1;\n  border: var(--b-width) solid;\n  border-radius: var(--b-radius);\n  justify-content: center;\n  align-items: center;\n  text-align: center;\n  line-height: 0.9em;\n  cursor: pointer;\n  overflow: hidden;\n  width: 1px;\n  user-select: none;\n}\n",v)}}),de("midi-encoder",{_previousPos:null,_width:30,_update:{observe:pn},value:Number.MIN_SAFE_INTEGER,chan:1,cc:-1,nrpn:"",min:0,max:127,colour:k("#ffffff"),label:"__unset__",horizontal:!1,labelScale:1,grow:1,render:({value:e,colour:n,label:t,min:o,max:r,chan:a,cc:i,nrpn:d,_width:u,labelScale:s,grow:f})=>{sn("midi-encoder",`${i}${a}${d}`,e),e>r&&(e=r),e<o&&(e=o);const p=Math.round((e-o)/(r-o)*100),b=(e-o)/(r-o)*75;"__unset__"===t&&(t="%v"),i>0&&c(i,a,e),d&&l(d,a,e,r>127);const v=`\n    :host {\n      flex-grow: ${f}\n    }\n    #label {\n      color: ${n}; \n      font-size:${.3*u*s}px\n    }`;return rn`<div>
      <svg viewBox="0 0 36 36">
        <path
          d="M18 2.0
    a 16 16 0 0 1 0 32
    a 16 16 0 0 1 0 -32"
          fill="none"
          stroke="${n}"
          stroke-opacity="0.3"
          stroke-width="0.25rem"
          stroke-dasharray="75, 100"
          transform="rotate(226 18 18)"
          stroke-linecap="round"
        />
        <path
          d="M18 2.0
    a 16 16 0 0 1 0 32
    a 16 16 0 0 1 0 -32"
          fill="none"
          stroke="${n}"
          stroke-width="0.25rem"
          stroke-dasharray="${b}, 100"
          transform="rotate(226 18 18)"
          stroke-linecap="round"
        />
      </svg>
      <div id="label" innerHTML="${dn(t,e,p,a,i)}"></div>
    </div>`.style(":host {\n  flex: 1 1;\n  display: flex;\n  margin: var(--spacing);\n}\n\nsvg {\n  height: 100%;\n  margin: 0 auto;\n}\n\ndiv {\n  flex: auto;\n  justify-content: center;\n  display: flex;\n  align-items: center;\n  text-align: center;\n  cursor: pointer;\n  overflow: hidden;\n  user-select: none;\n  position: relative;\n}\n\n#label {\n  font-size: 5vmin;\n  position: absolute;\n  z-index: 40;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n  text-align: center;\n  line-height: 0.9em;\n  width: 100%;\n}\n",v)}}),de("midi-button",{_pressed:!1,_width:30,chan:1,cc:-1,nrpn:"",nrpnHires:!1,value:0,valueOff:0,velo:127,note:-1,colour:k("#ffffff"),label:"__unset__",toggle:!1,labelScale:1,grow:1,render:({label:e,colour:n,_pressed:t,chan:o,cc:r,nrpn:a,note:i,_width:c,labelScale:l,grow:d})=>{"__unset__"===e&&(i>0?e="%n":r>0?e="%t":a&&(e=a));const u=`\n    :host {\n      flex-grow: ${d}\n    }\n    button {\n      background-color: ${t?`${un(n)}`:"var(--bg)"};\n      color: ${n};\n      border-color: ${n};\n      font-size: ${.4*c*l}px !important;\n    }`;return rn`<button
      onmouseup="${bn}"
      ontouchend="${bn}"
      onmousedown="${vn}"
      ontouchstart="${vn}"
      onmouseleave="${bn}"
      innerHTML="${dn(e,"","",o,r,i)}"
    ></button>`.style(":host {\n  flex: 1 1;\n  display: flex;\n  margin: var(--spacing);\n}\n\nbutton {\n  font-family: var(--font);\n  background-color: var(--bg);\n  font-size: 5vw;\n  display: flex;\n  flex: 1 1;\n  border: var(--b-width) solid;\n  border-radius: var(--b-radius);\n  justify-content: center;\n  align-items: center;\n  cursor: pointer;\n  overflow: hidden;\n  width: 1px;\n  user-select: none;\n}\n",u)}}),de("midi-pad",{_previousPos:null,_width:30,_update:{observe:(e,n,t)=>{if(n.restoreValue)return void(e.value=n.restoreValue);e._previousPos={x:n.x,y:n.y};let o=e.valueX+n.dx,r=e.valueY-n.dy;o=ln(o,e.min,e.max),r=ln(r,e.min,e.max),e.valueX=Math.round(o),e.valueY=Math.round(r)}},valueX:Number.MIN_SAFE_INTEGER,valueY:Number.MIN_SAFE_INTEGER,chan:1,ccX:-1,ccY:-1,min:0,max:127,colour:k("#ffffff"),label:"__unset__",labelScale:1,grow:1,render:({valueX:e,valueY:n,colour:t,label:o,min:r,max:a,ccX:i,ccY:l,chan:d,nrpn:u,_width:s,labelScale:f,grow:p})=>{sn("midi-pad",`${i}${d}${u}X`,e),sn("midi-pad",`${l}${d}${u}Y`,n),e=ln(e,r,a),n=ln(n,r,a);let b=Math.round((e-r)/(a-r)*100),v=Math.round((n-r)/(a-r)*100);"__unset__"===o&&(o="%v");const h=`\n    :host {\n      flex-grow: ${p}\n    }\n    div {\n      color: ${t};\n      border-color: ${t};\n    }\n    #label {\n      font-size: ${.4*s*f}px;\n    }\n    #marker {\n      background-color: ${un(t)};\n      border-color: ${t};\n      bottom: calc(${v}% - 1.5vmax);\n      left: calc(${b}% - 1.5vmax);\n    }`;return i>0&&l>0&&(console.log("p send"),c(i,d,e),c(l,d,n)),rn`<div>
      <div id="label" innerHTML="${dn(o,`${e},${n}`,`${b},${v}`,d)}"></div>
      <span id="marker"></span>
    </div>`.style(":host {\n  flex: 1 1;\n  display: flex;\n  margin: var(--spacing);\n}\n\ndiv {\n  font-size: 4vw;\n  display: flex;\n  flex: 1 1;\n  border: var(--b-width) solid;\n  border-radius: var(--b-radius);\n  justify-content: center;\n  align-items: center;\n  text-align: center;\n  line-height: 0.9em;\n  cursor: pointer;\n  overflow: hidden;\n  width: 1px;\n  user-select: none;\n  position: relative;\n}\n\n#marker {\n  width: 3vmax;\n  height: 3vmax;\n  border-radius: 50%;\n  position: absolute;\n  background-color: white;\n  display: block;\n  z-index: 10;\n  border: 0.3vmax solid white;\n}\n\n#label {\n  border: none;\n  padding: 1rem;\n}\n",h)}}),de("midi-counter",{_width:30,chan:1,cc:-1,value:0,min:0,max:127,colour:k("#ffffff"),label:"__unset__",labelScale:1,grow:1,render:({label:e,colour:n,chan:t,cc:o,_width:r,labelScale:a,grow:i,value:c})=>{sn("midi-counter",`${o}${t}0`,c);const l=`\n    :host {\n      flex-grow: ${i}\n    }\n    button:active {\n      background-color: ${un(n)};\n    }\n    #label {\n      font-size: ${.2*r*a}px !important;\n      border-color: ${n};\n      color: ${n};\n      background-color: var(--bg);\n    }\n    button {\n      color: ${n};\n      border-color: ${n};\n      font-size: ${.3*r*a}px !important;\n    }`;return rn`<div>
      <span id="label" innerHTML="${c}"></span>
      <button id="dec" onmousedown="${hn}" ontouchstart="${hn}">-1</button>
      <button id="inc" onmousedown="${hn}" ontouchstart="${hn}">+1</button>
    </div>`.style(":host {\n  flex: 1 1;\n  display: flex;\n  margin: var(--spacing);\n}\n\ndiv {\n  display: flex;\n  flex-direction: row;\n  flex: 1 1;\n  position: relative;\n}\n\nbutton {\n  font-family: var(--font);\n  background-color: var(--bg);\n  font-size: 5vw;\n  flex: 1 1;\n  border: var(--b-width) solid;\n  border-radius: var(--b-radius);\n  justify-content: center;\n  align-items: center;\n  cursor: pointer;\n  overflow: hidden;\n  user-select: none;\n}\n\n#label {\n  position: absolute;\n  background-color: var(--bg);\n  height: 50%;\n  text-align: center;\n  width: 25%;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  z-index: 4;\n  font-size: 5vw;\n  overflow: hidden;\n  display: block;\n  pointer-events: none;\n}\n",l)}});let mn=[];function yn(e){for(let n of e.changedTouches)mn[n.identifier]=n.target}function gn(e){for(let n of e.changedTouches)kn(n.target,n.screenX,n.screenY)}function wn(e){for(let n of e.changedTouches)mn.splice(n.identifier,1)}function xn(e){mn[20]=e.target}function Sn(e){kn(mn[20],e.screenX,e.screenY)}function En(e){mn.splice(20,1)}function kn(e,n,t){if(!e)return;let o=0,r=0;e._previousPos&&(o=n-e._previousPos.x,r=t-e._previousPos.y,o=ln(o,-6,6)/1,r=ln(r,-6,6)/1),e._update={dx:o,dy:r,x:n,y:t}}function Nn(e){e.preventDefault()}function $n(){for(let e of document.body.querySelectorAll("midi-slider,midi-encoder,midi-pad,midi-button,midi-counter"))e._width=e.clientWidth}window.addEventListener("resize",$n),window.addEventListener("load",(async()=>{await async function(){const e=document.createElement("div");e.id="pageMask",document.body.append(e);const n=document.createElement("style");n.textContent="@import url('https://fonts.googleapis.com/css2?family=PT+Sans&display=swap');\n\n:root {\n  /* these variables are used everywhere */\n  --bg: black; /* background colour */\n  --b-radius: 0.7rem; /* border radius */\n  --b-width: 0.3rem; /* border thickness */\n  --spacing: 0.5%; /* widget spacing */\n\n  --font: 'PT Sans', sans-serif; /* Consolas, 'Courier New', monospace; */\n}\n\nhtml,\nbody {\n  height: 100%;\n  margin: 0;\n  padding: 0;\n  overflow-y: hidden;\n  color: white;\n  background-color: var(--bg);\n  font-family: var(--font);\n  touch-action: none;\n}\n\nbody {\n  display: flex;\n  flex-direction: column;\n}\n\n/* Used to hide the page behind the config dialog */\n#pageMask {\n  background: rgba(0, 0, 0, 0.8);\n  position: fixed;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  display: none;\n}\n";let t=document.createElement("meta");t.setAttribute("name","viewport"),t.setAttribute("content","width=device-width, user-scalable=no, initial-scale=1.0"),document.getElementsByTagName("head")[0].appendChild(t);let o=document.querySelector("link[rel~='icon']");o||(o=document.createElement("link"),o.rel="icon",o.href="https://raw.githubusercontent.com/benc-uk/touchmidi2/main/src/assets/favicon.png",document.getElementsByTagName("head")[0].appendChild(o)),document.head.append(n)}();const e=await a();e?(function(e){const o=document.createElement("midi-config");o.midiAccess=e,o.addEventListener("config-done",(o=>{if(o.detail&&o.detail.deviceId){if(function(e="output-1",o=0){n=e,t=o}(e.outputs.get(o.detail.deviceId),o.detail.globalChannel||0),console.log(`MIDI configured for device '${o.detail.deviceId}' and channel: ${o.detail.globalChannel}`),o.detail.restoreValues){console.log("Restoring saved widget values");for(let e of document.body.querySelectorAll("midi-slider,midi-encoder,midi-pad,midi-counter"))if("midi-pad"==e.tagName.toLowerCase()){let n=fn(e,`${e.ccX}${e.chan}${e.nrpn}X`),t=fn(e,`${e.ccY}${e.chan}${e.nrpn}Y`);n&&(e.valueX=n),t&&(e.valueY=t)}else{let n=fn(e);n&&(e.value=n)}}}else alert("No MIDI device id returned, MIDI output device not opened!")})),document.body.appendChild(o)}(e),setTimeout($n,20),window.addEventListener("mousedown",xn,!1),window.addEventListener("mousemove",Sn,!1),window.addEventListener("mouseup",En,!1),window.addEventListener("touchstart",yn,!1),window.addEventListener("touchmove",gn,!1),window.addEventListener("touchend",wn,!1),window.addEventListener("dblclick",Nn,!1),window.addEventListener("contextmenu",Nn,!1)):document.body.innerHTML='<div style="text-align: center; font-size: 150%">\n    <h1 style="color:#ee2222">Failed to get MIDI access</h1><br>This is likely because your browser doesn\'t support MIDI or permissions were not granted<br><br>Try again using Chrome or Edge</div>'}))})();